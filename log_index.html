<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Log Table</title>
    <!--  Bootstrap CDN  -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!--  JQuery CDN  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--  Tabulator CDN  -->
    <link href="https://unpkg.com/tabulator-tables@4.2.7/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.2.7/dist/js/tabulator.min.js"></script>
</head>
<body>
<div class="table-wrapper" style="width: 70%; margin: 50px auto;">
    <div id="infoTable" class="my-5"></div>
</div>
</body>
<script>
    $(document).ready(function () {
        $(document).ready(function () {
            setInterval(()=> {gettingLog()}, 10000)
        })
    })
    function gettingLog(){
        var url = "http://51.143.8.209:8000/log/1";
        var settings = {
            "url": url,
            "method": "GET",
            "timeout": 0,
            "headers": {
                "Authorization": "Token a07f52f72f904f81da711ce5072a14aa99eadb83"
            },
        };
        $.ajax(settings).done(function (response) {
            creatingTable(response)
        }).fail(function() {
            alert( "Request Failed!" );
        });
    }
    function creatingTable(resp) {
        var tableData = resp
        console.log(tableData)
        var table = new Tabulator("#infoTable", {
            data: tableData,
            layout:"fitColumns",
            columns:[
                {title:"Info", field:"info"},
                {title:"status", field:"status"},
                {title:"Input Id", field:"input.id"},
                {title:"Start Date", field:"input.start_date"},
                {title:"End Date", field:"input.end_date"},
                {title:"Category", field:"input.category"},
                {title:"Currency", field:"input.currency.name"},
                {title:"Exchange", field:"input.exchange.name"},
            ],
            // autoColumns:true,
        });
    }
</script>
</html>